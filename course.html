<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ExamBuddy Courses</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1 id="pageTitle">Select Subject & Chapter</h1>

  <div id="subjectSection">
    <h2>Subjects:</h2>
    <div id="subjectList"></div>
  </div>

  <div id="chapterSection" style="display:none;">
    <h2>Chapters:</h2>
    <div id="chapterList"></div>
  </div>

  <div id="questionsSection" style="display:none;">
    <h2>Questions:</h2>
    <div id="questionsList"></div>
  </div>

<script>
  // Get saved choices
  const cls = localStorage.getItem("selectedClass");
  const board = localStorage.getItem("selectedBoard");
  const stream = localStorage.getItem("selectedStream");
  const scienceCombo = localStorage.getItem("scienceCombo");

  if (!cls || !board) {
    alert("Please select class and board first!");
    window.location.href = "class.html";
  }

  const subjectsDiv = document.getElementById("subjectList");
  const chapterDiv = document.getElementById("chapterList");
  const questionsDiv = document.getElementById("questionsList");
  const chapterSection = document.getElementById("chapterSection");
  const questionsSection = document.getElementById("questionsSection");

  let subjects = [];
  let chapters = {};
  let questions = {};

  // Define subjects per class
  if (cls === "8" || cls === "9" || cls === "10") {
    subjects = ["Maths", "Science", "English", "Social Science", "Hindi"];
  } else if (cls === "11" || cls === "12") {
    if (stream === "Science") {
      if (scienceCombo === "PCM") subjects = ["Physics","Chemistry","Mathematics","English"];
      if (scienceCombo === "PCB") subjects = ["Physics","Chemistry","Biology","English"];
      if (scienceCombo === "PCMB") subjects = ["Physics","Chemistry","Mathematics","Biology","English"];
      if (scienceCombo === "CompSci") subjects = ["Physics","Chemistry","Mathematics","Computer Science","English"];
    } else if (stream === "Commerce") {
      subjects = ["Accountancy","Business Studies","Economics","Mathematics/Entrepreneurship","English"];
    } else if (stream === "Arts") {
      subjects = ["History","Political Science","Geography","Economics","Psychology","English"];
    }
  }

  // Define chapters for each subject (sample, extendable)
  subjects.forEach(sub => {
    if(cls === "8" || cls === "9" || cls === "10") {
      chapters[sub] = [`${sub} - Chapter 1`, `${sub} - Chapter 2`, `${sub} - Chapter 3`];
    } else {
      chapters[sub] = [`${sub} - Chapter 1`, `${sub} - Chapter 2`, `${sub} - Chapter 3`, `${sub} - Chapter 4`];
    }
  });

  // Define questions per chapter (mixed)
  Object.keys(chapters).forEach(sub => {
    questions[sub] = {};
    chapters[sub].forEach(chap => {
      questions[sub][chap] = [
        {type: "MCQ", question: `What is the main concept of ${chap}?`, options:["A","B","C","D"], answer:"A"},
        {type: "True/False", question: `Statement for ${chap} is True or False?`, answer:"True"},
        {type: "Short Answer", question: `Explain key points of ${chap}`, answer:"Brief explanation"},
        {type: "MCQ", question: `Another MCQ on ${chap}?`, options:["X","Y","Z","W"], answer:"Y"},
        {type: "True/False", question: `Another statement on ${chap}?`, answer:"False"},
      ];
    });
  });

  // Render subjects
  subjects.forEach(sub => {
    const card = document.createElement("div");
    card.className = "subjectCard";
    card.innerText = sub;
    card.addEventListener("click", () => {
      renderChapters(sub);
    });
    subjectsDiv.appendChild(card);
  });

  function renderChapters(sub) {
    chapterDiv.innerHTML = "";
    questionsDiv.innerHTML = "";
    questionsSection.style.display = "none";
    chapterSection.style.display = "block";

    chapters[sub].forEach(chap => {
      const chapCard = document.createElement("div");
      chapCard.className = "chapterCard";
      chapCard.innerText = chap;
      chapCard.addEventListener("click", () => {
        renderQuestions(sub, chap);
      });
      chapterDiv.appendChild(chapCard);
    });
  }

  function renderQuestions(sub, chap) {
    questionsDiv.innerHTML = "";
    questionsSection.style.display = "block";

    questions[sub][chap].forEach((q, index) => {
      const qDiv = document.createElement("div");
      qDiv.className = "questionCard";

      let qText = `<b>Q${index+1} (${q.type}):</b> ${q.question}<br>`;
      if(q.type === "MCQ") {
        qText += q.options.map(opt => `<input type="radio" name="q${index}"> ${opt}<br>`).join("");
      } else if(q.type === "True/False") {
        qText += `<input type="radio" name="q${index}"> True<br><input type="radio" name="q${index}"> False<br>`;
      } else {
        qText += `<input type="text" style="width:90%" placeholder="Your answer here"><br>`;
      }

      qDiv.innerHTML = qText;
      questionsDiv.appendChild(qDiv);
    });
  }

</script>

<style>
body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
.subjectCard, .chapterCard, .questionCard { 
  border:1px solid #444; padding:15px; margin:10px; border-radius:10px; cursor:pointer; 
  transition:0.3s; display:inline-block; text-align:left; width:200px; 
}
.subjectCard:hover, .chapterCard:hover { background:#f0f0f0; transform:scale(1.05);}
.questionCard { width:80%; cursor:auto; border:1px solid #999;}
</style>
</body>
</html>
