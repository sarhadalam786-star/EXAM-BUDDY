<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Select Class, Board & Chapter</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Select Your Class, Board & Chapter</h2>
  
  <label for="classSelect">Choose Class:</label>
  <select id="classSelect" onchange="checkStream(); populateChapters();">
    <option value="">--Select--</option>
    <option value="8">Class 8</option>
    <option value="9">Class 9</option>
    <option value="10">Class 10</option>
    <option value="11">Class 11</option>
    <option value="12">Class 12</option>
  </select>

  <br><br>

  <label for="boardSelect">Choose Board:</label>
  <select id="boardSelect" onchange="populateChapters()">
    <option value="">--Select--</option>
    <option value="CBSE">CBSE</option>
    <option value="ICSE">ICSE</option>
  </select>

  <br><br>

  <!-- Stream selection for class 11 & 12 -->
  <div id="streamSection" style="display:none;">
    <label for="streamSelect">Choose Stream:</label>
    <select id="streamSelect" onchange="checkScience(); populateChapters();">
      <option value="">--Select--</option>
      <option value="Science">Science</option>
      <option value="Commerce">Commerce</option>
      <option value="Arts">Arts/Humanities</option>
    </select>
  </div>

  <br><br>

  <!-- Science subject combinations -->
  <div id="scienceCombo" style="display:none;">
    <label for="scienceSelect">Choose Combination:</label>
    <select id="scienceSelect" onchange="populateChapters()">
      <option value="">--Select--</option>
      <option value="PCM">PCM</option>
      <option value="PCB">PCB</option>
      <option value="PCMB">PCMB</option>
      <option value="CompSci">PCM + Computer Science</option>
    </select>
  </div>

  <br><br>

  <!-- Chapter selection -->
  <div>
    <label for="chapterSelect">Choose Chapter:</label>
    <select id="chapterSelect">
      <option value="">--Select Chapter--</option>
    </select>
  </div>

  <br><br>

  <button onclick="goToCourses()">Next</button>

  <script>
    const chaptersDB = {
      "8": { "Maths": ["Chapter 1","Chapter 2"], "Science": ["Ch 1","Ch 2"], "English":["Ch 1","Ch 2"], "Social Science":["Ch 1","Ch 2"], "Hindi":["Ch 1","Ch 2"] },
      "9": { "Maths": ["Ch 1","Ch 2"], "Science": ["Ch 1","Ch 2"], "English":["Ch 1","Ch 2"], "Social Science":["Ch 1","Ch 2"], "Hindi":["Ch 1","Ch 2"] },
      "10": { "Maths": ["Ch 1","Ch 2"], "Science": ["Ch 1","Ch 2"], "English":["Ch 1","Ch 2"], "Social Science":["Ch 1","Ch 2"], "Hindi":["Ch 1","Ch 2"] },
      "11": { "Physics":["Ch 1","Ch 2"], "Chemistry":["Ch 1","Ch 2"], "Maths":["Ch 1","Ch 2"], "Biology":["Ch 1","Ch 2"], "Computer Science":["Ch 1","Ch 2"], "Accountancy":["Ch 1","Ch 2"], "Business Studies":["Ch 1","Ch 2"], "Economics":["Ch 1","Ch 2"], "History":["Ch 1","Ch 2"], "Political Science":["Ch 1","Ch 2"], "Geography":["Ch 1","Ch 2"], "Psychology":["Ch 1","Ch 2"] },
      "12": { "Physics":["Ch 1","Ch 2"], "Chemistry":["Ch 1","Ch 2"], "Maths":["Ch 1","Ch 2"], "Biology":["Ch 1","Ch 2"], "Computer Science":["Ch 1","Ch 2"], "Accountancy":["Ch 1","Ch 2"], "Business Studies":["Ch 1","Ch 2"], "Economics":["Ch 1","Ch 2"], "History":["Ch 1","Ch 2"], "Political Science":["Ch 1","Ch 2"], "Geography":["Ch 1","Ch 2"], "Psychology":["Ch 1","Ch 2"] }
    };

    function checkStream() {
      const cls = document.getElementById("classSelect").value;
      document.getElementById("streamSection").style.display = (cls === "11" || cls === "12") ? "block" : "none";
      document.getElementById("scienceCombo").style.display = "none";
    }

    function checkScience() {
      const stream = document.getElementById("streamSelect").value;
      document.getElementById("scienceCombo").style.display = (stream === "Science") ? "block" : "none";
    }

    function populateChapters() {
      const cls = document.getElementById("classSelect").value;
      const board = document.getElementById("boardSelect").value;
      const stream = document.getElementById("streamSelect").value;
      const scienceCombo = document.getElementById("scienceSelect").value;

      let subject = "";
      if(cls >= 8 && cls <= 10) {
        // default subjects for 8â€“10
        subject = Object.keys(chaptersDB[cls])[0]; // just Maths for default for simplicity
      } else if(cls === "11" || cls === "12") {
        if(stream==="Science") subject = scienceCombo==="PCM"?"Maths":scienceCombo==="PCB"?"Biology":"Physics";
        else if(stream==="Commerce") subject = "Accountancy";
        else if(stream==="Arts") subject = "History";
      }

      const chapterSelect = document.getElementById("chapterSelect");
      chapterSelect.innerHTML = "<option value=''>--Select Chapter--</option>";

      if(subject && chaptersDB[cls][subject]) {
        chaptersDB[cls][subject].forEach(ch => {
          const opt = document.createElement("option");
          opt.value = ch;
          opt.innerText = ch;
          chapterSelect.appendChild(opt);
        });
      }
    }

    function goToCourses() {
      const selectedClass = document.getElementById("classSelect").value;
      const selectedBoard = document.getElementById("boardSelect").value;
      const selectedStream = document.getElementById("streamSelect").value;
      const scienceOption = document.getElementById("scienceSelect").value;
      const chapter = document.getElementById("chapterSelect").value;

      if(!selectedClass || !selectedBoard || (selectedClass>=11 && !selectedStream) || (selectedStream==="Science" && !scienceOption) || !chapter) {
        alert("Please complete all selections!");
        return;
      }

      localStorage.setItem("selectedClass", selectedClass);
      localStorage.setItem("selectedBoard", selectedBoard);
      localStorage.setItem("selectedStream", selectedStream);
      localStorage.setItem("scienceCombo", scienceOption);
      localStorage.setItem("selectedChapter", chapter);

      window.location.href="courses.html";
    }
  </script>
</body>
</html>
